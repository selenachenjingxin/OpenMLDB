<!--
Generated by 'make udf_doc_gen'.  DO NOT EDIT!
---
title: udfs/udfs.h

---
# udfs/udfs.h

## Functions

| Name          | Description    |
| -------------- | -------------- |
| **[abs](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-abs)**()| <br>Return the absolute value of expr. |
| **[acos](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-acos)**()| <br>Return the arc cosine of expr. |
| **[add](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-add)**()| <br>Compute sum of two arguments. |
| **[array_contains](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-array-contains)**()| <br>array_contains(array, value) - Returns true if the array contains the value. |
| **[asin](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-asin)**()| <br>Return the arc sine of expr. |
| **[at](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-at)**()| |
| **[atan](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-atan)**()| <br>Return the arc tangent of expr If called with one parameter, this function returns the arc tangent of expr. If called with two parameters X and Y, this function returns the arc tangent of Y / X. |
| **[atan2](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-atan2)**()| <br>Return the arc tangent of Y / X.. |
| **[avg](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-avg)**()| <br>Compute average of values. |
| **[avg_cate](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-avg-cate)**()| <br>Compute average of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[avg_cate_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-avg-cate-where)**()| <br>Compute average of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V', separated by comma, and sorted by key in ascend order. |
| **[avg_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-avg-where)**()| <br>Compute average of values match specified condition. |
| **[bool](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-bool)**()| <br>Cast string expression to bool. |
| **[ceil](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-ceil)**()| <br>Return the smallest integer value not less than the expr. |
| **[ceiling](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-ceiling)**()| |
| **[char](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-char)**()| <br>Returns the ASCII character having the binary equivalent to expr. If n >= 256 the result is equivalent to char(n % 256). |
| **[char_length](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-char-length)**()| <br>Returns the length of the string. It is measured in characters and multibyte character string is not supported. |
| **[character_length](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-character-length)**()| |
| **[concat](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-concat)**()| <br>This function returns a string resulting from the joining of two or more string values in an end-to-end manner. (To add a separating value during joining, see concat_ws.) |
| **[concat_ws](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-concat-ws)**()| <br>Returns a string resulting from the joining of two or more string value in an end-to-end manner. It separates those concatenated string values with the delimiter specified in the first function argument. |
| **[cos](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-cos)**()| <br>Return the cosine of expr. |
| **[cot](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-cot)**()| <br>Return the cotangent of expr. |
| **[count](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-count)**()| <br>Compute number of values. |
| **[count_cate](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-count-cate)**()| <br>Compute count of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[count_cate_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-count-cate-where)**()| <br>Compute count of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[count_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-count-where)**()| <br>Compute number of values match specified condition. |
| **[date](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-date)**()| <br>Cast timestamp or string expression to date (date >= 1900-01-01) |
| **[date_format](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-date-format)**()| <br>Formats the date value according to the format string. |
| **[datediff](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-datediff)**()| <br>days difference from date1 to date2 |
| **[day](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-day)**()| |
| **[dayofmonth](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-dayofmonth)**()| <br>Return the day of the month for a timestamp or date. |
| **[dayofweek](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-dayofweek)**()| <br>Return the day of week for a timestamp or date. |
| **[dayofyear](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-dayofyear)**()| <br>Return the day of year for a timestamp or date. Returns 0 given an invalid date. |
| **[degrees](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-degrees)**()| <br>Convert radians to degrees. |
| **[distinct_count](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-distinct-count)**()| <br>Compute number of distinct values. |
| **[double](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-double)**()| <br>Cast string expression to double. |
| **[drawdown](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-drawdown)**()| <br>Compute drawdown of values. |
| **[earth_distance](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-earth-distance)**()| <br>Returns the great circle distance between two points on the surface of the Earth. Km as return unit. add a minus (-) sign if heading west (W) or south (S). |
| **[entropy](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-entropy)**()| <br>Calculate Shannon entropy of a column of values. Null values are skipped. |
| **[ew_avg](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-ew-avg)**()| <br>Compute exponentially-weighted average of values. It's equivalent to pandas ewm(alpha=<alpha>, adjust=True, ignore_na=True, com=None, span=None, halflife=None, min_periods=0) |
| **[exp](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-exp)**()| <br>Return the value of e (the base of natural logarithms) raised to the power of expr. |
| **[farm_fingerprint](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-farm-fingerprint)**()| |
| **[first_value](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-first-value)**()| <br>Returns the value of expr from the latest row (last row) of the window frame. |
| **[float](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-float)**()| <br>Cast string expression to float. |
| **[floor](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-floor)**()| <br>Return the largest integer value not less than the expr. |
| **[fz_join](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-join)**()| |
| **[fz_split](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-split)**()| |
| **[fz_split_by_key](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-split-by-key)**()| |
| **[fz_split_by_value](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-split-by-value)**()| |
| **[fz_top1_ratio](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-top1-ratio)**()| |
| **[fz_topn_frequency](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-topn-frequency)**()| |
| **[fz_window_split](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-window-split)**()| |
| **[fz_window_split_by_key](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-window-split-by-key)**()| |
| **[fz_window_split_by_value](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-fz-window-split-by-value)**()| |
| **[hash64](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-hash64)**()| <br>Returns a hash value of the arguments. It is not a cryptographic hash function and should not be used as such. |
| **[hex](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-hex)**()| <br>Convert integer to hexadecimal. |
| **[hour](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-hour)**()| <br>Return the hour for a timestamp. |
| **[identity](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-identity)**()| <br>Return value. |
| **[if_null](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-if-null)**()| <br>If input is not null, return input value; else return default value. |
| **[ifnull](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-ifnull)**()| |
| **[ilike_match](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-ilike-match)**()| <br>pattern match same as ILIKE predicate |
| **[inc](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-inc)**()| <br>Return expression + 1. |
| **[int16](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-int16)**()| <br>Cast string expression to int16. |
| **[int32](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-int32)**()| <br>Cast string expression to int32. |
| **[int64](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-int64)**()| <br>Cast string expression to int64. |
| **[is_null](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-is-null)**()| <br>Check if input value is null, return bool. |
| **[isnull](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-isnull)**()| |
| **[join](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-join)**()| <br>For each string value from specified column of window, join by delimeter. Null values are skipped. |
| **[lag](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-lag)**()| <br>Returns value evaluated at the row that is offset rows before the current row within the partition. Offset is evaluated with respect to the current row. |
| **[last_day](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-last-day)**()| <br>Return the last day of the month to which the date belongs to. |
| **[lcase](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-lcase)**()| <br>Convert all the characters to lowercase. Note that characters with values > 127 are simply returned. |
| **[like_match](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-like-match)**()| <br>pattern match same as LIKE predicate |
| **[ln](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-ln)**()| <br>Return the natural logarithm of expr. |
| **[log](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-log)**()| <br>log(base, expr) If called with one parameter, this function returns the natural logarithm of expr. If called with two parameters, this function returns the logarithm of expr to the base. |
| **[log10](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-log10)**()| <br>Return the base-10 logarithm of expr. |
| **[log2](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-log2)**()| <br>Return the base-2 logarithm of expr. |
| **[lower](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-lower)**()| |
| **[make_tuple](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-make-tuple)**()| |
| **[max](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-max)**()| <br>Compute maximum of values. |
| **[max_cate](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-max-cate)**()| <br>Compute maximum of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[max_cate_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-max-cate-where)**()| <br>Compute maximum of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[max_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-max-where)**()| <br>Compute maximum of values match specified condition. |
| **[maximum](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-maximum)**()| <br>Compute maximum of two arguments. |
| **[median](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-median)**()| <br>Compute the median of values. |
| **[min](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-min)**()| <br>Compute minimum of values. |
| **[min_cate](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-min-cate)**()| <br>Compute minimum of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[min_cate_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-min-cate-where)**()| <br>Compute minimum of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. |
| **[min_where](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-min-where)**()| <br>Compute minimum of values match specified condition. |
| **[minimum](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-minimum)**()| <br>Compute minimum of two arguments. |
| **[minute](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-minute)**()| <br>Return the minute for a timestamp. |
| **[month](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-month)**()| <br>Return the month part of a timestamp or date. |


## Functions Documentation
-->
## Built-in Functions


### function abs

```cpp
abs()
```

**Description**:

Return the absolute value of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT ABS(-32);
-- output 32
```


**Supported Types**:

* [`bool`]
* [`number`] 

### function acos

```cpp
acos()
```

**Description**:

Return the arc cosine of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT ACOS(1);
-- output 0
```


**Supported Types**:

* [`number`] 

### function add

```cpp
add()
```

**Description**:

Compute sum of two arguments. 

**Since**:
0.1.0


Example:

```sql

select add(1, 2);
-- output 3
```


**Supported Types**:

* [`bool`, `bool`]
* [`bool`, `number`]
* [`bool`, `timestamp`]
* [`int16`, `timestamp`]
* [`int32`, `timestamp`]
* [`int64`, `timestamp`]
* [`number`, `bool`]
* [`number`, `number`]
* [`timestamp`, `bool`]
* [`timestamp`, `int16`]
* [`timestamp`, `int32`]
* [`timestamp`, `int64`]
* [`timestamp`, `timestamp`] 

### function array_contains

```cpp
array_contains()
```

**Description**:

array_contains(array, value) - Returns true if the array contains the value. 

**Since**:
0.7.0


Example:

```sql

select array_contains([2,2], 2) as c0;
-- output true
```


**Supported Types**:

* [array_bool, `bool`]
* [array_date, `date`]
* [array_double, `double`]
* [array_float, `float`]
* [array_int16, `int16`]
* [array_int32, `int32`]
* [array_int64, `int64`]
* [array_string, `string`]
* [array_timestamp, `timestamp`] 

### function asin

```cpp
asin()
```

**Description**:

Return the arc sine of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT ASIN(0.0);
-- output 0.000000
```


**Supported Types**:

* [`number`] 

### function at

```cpp
at()
```

**Description**:


alias to lag 

### function atan

```cpp
atan()
```

**Description**:

Return the arc tangent of expr If called with one parameter, this function returns the arc tangent of expr. If called with two parameters X and Y, this function returns the arc tangent of Y / X. 

**Parameters**: 

  * **X** 
  * **Y** 


**Since**:
0.1.0


Example:

```sql

SELECT ATAN(-0.0);
-- output -0.000000

SELECT ATAN(0, -0);
-- output 3.141593
```


**Supported Types**:

* [`bool`, `bool`]
* [`bool`, `number`]
* [`number`]
* [`number`, `bool`]
* [`number`, `number`] 

### function atan2

```cpp
atan2()
```

**Description**:

Return the arc tangent of Y / X.. 

**Parameters**: 

  * **X** 
  * **Y** 


**Since**:
0.1.0


Example:

```sql

SELECT ATAN2(0, -0);
-- output 3.141593
```


**Supported Types**:

* [`bool`, `bool`]
* [`bool`, `number`]
* [`number`, `bool`]
* [`number`, `number`] 

### function avg

```cpp
avg()
```

**Description**:

Compute average of values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT avg(value) OVER w;
-- output 2
```


**Supported Types**:

* [`list<number>`] 

### function avg_cate

```cpp
avg_cate()
```

**Description**:

Compute average of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | catagory     |
|  -------- | -------- |
| 0    | x     |
| 1    | y     |
| 2    | x     |
| 3    | y     |
| 4    | x    |


```sql

SELECT avg_cate(value, catagory) OVER w;
-- output "x:2,y:2"
```

**Supported Types**:

* [`list<number>`, `list<date>`]
* [`list<number>`, `list<int16>`]
* [`list<number>`, `list<int32>`]
* [`list<number>`, `list<int64>`]
* [`list<number>`, `list<string>`]
* [`list<number>`, `list<timestamp>`] 

### function avg_cate_where

```cpp
avg_cate_where()
```

**Description**:

Compute average of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V', separated by comma, and sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | condition    | catagory     |
|  -------- | -------- | -------- |
| 0    | true    | x     |
| 1    | false    | y     |
| 2    | false    | x     |
| 3    | true    | y     |
| 4    | true    | x    |


```sql

SELECT avg_cate_where(value, condition, category) OVER w;
-- output "x:2,y:3"
```

**Supported Types**:

* [`list<number>`, `list<bool>`, `list<date>`]
* [`list<number>`, `list<bool>`, `list<int16>`]
* [`list<number>`, `list<bool>`, `list<int32>`]
* [`list<number>`, `list<bool>`, `list<int64>`]
* [`list<number>`, `list<bool>`, `list<string>`]
* [`list<number>`, `list<bool>`, `list<timestamp>`] 

### function avg_where

```cpp
avg_where()
```

**Description**:

Compute average of values match specified condition. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT avg_where(value, value > 2) OVER w;
-- output 3.5
```


**Supported Types**:

* [`list<number>`, `list<bool>`] 

### function bool

```cpp
bool()
```

**Description**:

Cast string expression to bool. 

**Since**:
0.1.0


Example:

```sql

select bool("true");
-- output true
```


**Supported Types**:

* [`string`] 

### function ceil

```cpp
ceil()
```

**Description**:

Return the smallest integer value not less than the expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT CEIL(1.23);
-- output 2
```


**Supported Types**:

* [`bool`]
* [`number`] 

### function ceiling

```cpp
ceiling()
```

**Description**:


alias to ceil 

### function char

```cpp
char()
```

**Description**:

Returns the ASCII character having the binary equivalent to expr. If n >= 256 the result is equivalent to char(n % 256). 

**Since**:
0.6.0


Example:

```sql

SELECT char(65);
--output "A"
```


**Supported Types**:

* [`int32`] 

### function char_length

```cpp
char_length()
```

**Description**:

Returns the length of the string. It is measured in characters and multibyte character string is not supported. 

**Since**:
0.6.0


Example:

```sql

SELECT CHAR_LENGTH('Spark SQL ');
--output 10
```


**Supported Types**:

* [`string`] 

### function character_length

```cpp
character_length()
```

**Description**:


alias to char_length 

### function concat

```cpp
concat()
```

**Description**:

This function returns a string resulting from the joining of two or more string values in an end-to-end manner. (To add a separating value during joining, see concat_ws.) 

**Since**:
0.1.0


Example:

```sql

select concat("1", 2, 3, 4, 5.6, 7.8, Timestamp(1590115420000L));
-- output "12345.67.82020-05-22 10:43:40"
```


**Supported Types**:

* [...] 

### function concat_ws

```cpp
concat_ws()
```

**Description**:

Returns a string resulting from the joining of two or more string value in an end-to-end manner. It separates those concatenated string values with the delimiter specified in the first function argument. 

**Since**:
0.1.0


Example:

```sql

select concat_ws("-", "1", 2, 3, 4, 5.6, 7.8, Timestamp(1590115420000L));
-- output "1-2-3-4-5.6-7.8-2020-05-22 10:43:40"
```


**Supported Types**:

* [`bool`, ...]
* [`date`, ...]
* [`number`, ...]
* [`string`, ...]
* [`timestamp`, ...] 

### function cos

```cpp
cos()
```

**Description**:

Return the cosine of expr. 

**Parameters**: 

  * **expr** It is a single argument in radians.


**Since**:
0.1.0


Example:

```sql

SELECT COS(0);
-- output 1.000000
```



* The value returned by [cos()](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-cos) is always in the range: -1 to 1.


**Supported Types**:

* [`number`] 

### function cot

```cpp
cot()
```

**Description**:

Return the cotangent of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT COT(1);
-- output 0.6420926159343306
```


**Supported Types**:

* [`number`] 

### function count

```cpp
count()
```

**Description**:

Compute number of values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT count(value) OVER w;
-- output 5
```


**Supported Types**:

* [`list<bool>`]
* [`list<date>`]
* [`list<number>`]
* [`list<row>`]
* [`list<string>`]
* [`list<timestamp>`] 

### function count_cate

```cpp
count_cate()
```

**Description**:

Compute count of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | catagory     |
|  -------- | -------- |
| 0    | x     |
| 1    | y     |
| 2    | x     |
| 3    | y     |
| 4    | x    |


```sql

SELECT count_cate(value, catagory) OVER w;
-- output "x:3,y:2"
```

**Supported Types**:

* [`list<bool>`, `list<date>`]
* [`list<bool>`, `list<int16>`]
* [`list<bool>`, `list<int32>`]
* [`list<bool>`, `list<int64>`]
* [`list<bool>`, `list<string>`]
* [`list<bool>`, `list<timestamp>`]
* [`list<date>`, `list<date>`]
* [`list<date>`, `list<int16>`]
* [`list<date>`, `list<int32>`]
* [`list<date>`, `list<int64>`]
* [`list<date>`, `list<string>`]
* [`list<date>`, `list<timestamp>`]
* [`list<number>`, `list<date>`]
* [`list<number>`, `list<int16>`]
* [`list<number>`, `list<int32>`]
* [`list<number>`, `list<int64>`]
* [`list<number>`, `list<string>`]
* [`list<number>`, `list<timestamp>`]
* [`list<string>`, `list<date>`]
* [`list<string>`, `list<int16>`]
* [`list<string>`, `list<int32>`]
* [`list<string>`, `list<int64>`]
* [`list<string>`, `list<string>`]
* [`list<string>`, `list<timestamp>`]
* [`list<timestamp>`, `list<date>`]
* [`list<timestamp>`, `list<int16>`]
* [`list<timestamp>`, `list<int32>`]
* [`list<timestamp>`, `list<int64>`]
* [`list<timestamp>`, `list<string>`]
* [`list<timestamp>`, `list<timestamp>`] 

### function count_cate_where

```cpp
count_cate_where()
```

**Description**:

Compute count of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | condition    | catagory     |
|  -------- | -------- | -------- |
| 0    | true    | x     |
| 1    | false    | y     |
| 2    | false    | x     |
| 3    | true    | y     |
| 4    | true    | x    |


```sql

SELECT count_cate_where(value, condition, category) OVER w;
-- output "x:2,y:1"
```

**Supported Types**:

* [`list<bool>`, `list<bool>`, `list<date>`]
* [`list<bool>`, `list<bool>`, `list<int16>`]
* [`list<bool>`, `list<bool>`, `list<int32>`]
* [`list<bool>`, `list<bool>`, `list<int64>`]
* [`list<bool>`, `list<bool>`, `list<string>`]
* [`list<bool>`, `list<bool>`, `list<timestamp>`]
* [`list<date>`, `list<bool>`, `list<date>`]
* [`list<date>`, `list<bool>`, `list<int16>`]
* [`list<date>`, `list<bool>`, `list<int32>`]
* [`list<date>`, `list<bool>`, `list<int64>`]
* [`list<date>`, `list<bool>`, `list<string>`]
* [`list<date>`, `list<bool>`, `list<timestamp>`]
* [`list<number>`, `list<bool>`, `list<date>`]
* [`list<number>`, `list<bool>`, `list<int16>`]
* [`list<number>`, `list<bool>`, `list<int32>`]
* [`list<number>`, `list<bool>`, `list<int64>`]
* [`list<number>`, `list<bool>`, `list<string>`]
* [`list<number>`, `list<bool>`, `list<timestamp>`]
* [`list<string>`, `list<bool>`, `list<date>`]
* [`list<string>`, `list<bool>`, `list<int16>`]
* [`list<string>`, `list<bool>`, `list<int32>`]
* [`list<string>`, `list<bool>`, `list<int64>`]
* [`list<string>`, `list<bool>`, `list<string>`]
* [`list<string>`, `list<bool>`, `list<timestamp>`]
* [`list<timestamp>`, `list<bool>`, `list<date>`]
* [`list<timestamp>`, `list<bool>`, `list<int16>`]
* [`list<timestamp>`, `list<bool>`, `list<int32>`]
* [`list<timestamp>`, `list<bool>`, `list<int64>`]
* [`list<timestamp>`, `list<bool>`, `list<string>`]
* [`list<timestamp>`, `list<bool>`, `list<timestamp>`] 

### function count_where

```cpp
count_where()
```

**Description**:

Compute number of values match specified condition. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT count_where(value, value > 2) OVER w;
-- output 2
```


**Supported Types**:

* [`list<bool>`, `list<bool>`]
* [`list<date>`, `list<bool>`]
* [`list<number>`, `list<bool>`]
* [`list<row>`, `list<bool>`]
* [`list<string>`, `list<bool>`]
* [`list<timestamp>`, `list<bool>`] 

### function date

```cpp
date()
```

**Description**:

Cast timestamp or string expression to date (date >= 1900-01-01) 

**Since**:
0.1.0


Supported string style:

* yyyy-mm-dd
* yyyymmdd
* yyyy-mm-dd hh:mm:ss

Example:

```sql

select date(timestamp(1590115420000));
-- output 2020-05-22
select date("2020-05-22");
-- output 2020-05-22
```


**Supported Types**:

* [`string`]
* [`timestamp`] 

### function date_format

```cpp
date_format()
```

**Description**:

Formats the date value according to the format string. 

Example:

```sql

select date_format(date(timestamp(1590115420000)),"%Y-%m-%d");
--output "2020-05-22"
```

**Supported Types**:

* [`date`, `string`]
* [`timestamp`, `string`] 

### function datediff

```cpp
datediff()
```

**Description**:

days difference from date1 to date2 

**Since**:
0.7.0


Supported date string style:

* yyyy-mm-dd
* yyyymmdd
* yyyy-mm-dd hh:mm:ss

Example:

```sql

select datediff("2021-05-10", "2021-05-01");
-- output 9
select datediff("2021-04-10", "2021-05-01");
-- output -21
select datediff(Date("2021-04-10"), Date("2021-05-01"));
-- output -21
```


**Supported Types**:

* [`date`, `date`]
* [`date`, `string`]
* [`string`, `date`]
* [`string`, `string`] 

### function day

```cpp
day()
```

**Description**:


alias to dayofmonth 

### function dayofmonth

```cpp
dayofmonth()
```

**Description**:

Return the day of the month for a timestamp or date. 

**Since**:
0.1.0


Note: This function equals the `[day()](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-day)` function.

Example:

```sql

select dayofmonth(timestamp(1590115420000));
-- output 22

select day(timestamp(1590115420000));
-- output 22
```


**Supported Types**:

* [`date`]
* [`int64`]
* [`timestamp`] 

### function dayofweek

```cpp
dayofweek()
```

**Description**:

Return the day of week for a timestamp or date. 

**Since**:
0.4.0


Note: This function equals the `week()` function.

Example:

```sql

select dayofweek(timestamp(1590115420000));
-- output 6
```


**Supported Types**:

* [`date`]
* [`int64`]
* [`timestamp`] 

### function dayofyear

```cpp
dayofyear()
```

**Description**:

Return the day of year for a timestamp or date. Returns 0 given an invalid date. 

**Since**:
0.1.0


Example:

```sql

select dayofyear(timestamp(1590115420000));
-- output 143

select dayofyear(1590115420000);
-- output 143

select dayofyear(date("2020-05-22"));
-- output 143

select dayofyear(date("2020-05-32"));
-- output 0
```


**Supported Types**:

* [`date`]
* [`int64`]
* [`timestamp`] 

### function degrees

```cpp
degrees()
```

**Description**:

Convert radians to degrees. 

**Parameters**: 

  * **expr** 


**Since**:
0.5.0


Example:

```sql

SELECT degrees(3.141592653589793);
-- output  180.0
```


**Supported Types**:

* [`double`] 

### function distinct_count

```cpp
distinct_count()
```

**Description**:

Compute number of distinct values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 0     |
| 2     |
| 2     |
| 4    |


```sql

SELECT distinct_count(value) OVER w;
-- output 3
```


**Supported Types**:

* [`list<bool>`]
* [`list<date>`]
* [`list<number>`]
* [`list<string>`]
* [`list<timestamp>`] 

### function double

```cpp
double()
```

**Description**:

Cast string expression to double. 

**Since**:
0.1.0


Example:

```sql

select double("1.23");
-- output 1.23
```


**Supported Types**:

* [`string`] 

### function drawdown

```cpp
drawdown()
```

**Description**:

Compute drawdown of values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.7.2


Drawdown is defined as the max decline percentage from a historical peak to a subsequent valley. It is commonly used as an indicator of risk in quant-trading to measure the max loss.

It requires that values are ordered so that it can only be used with WINDOW (PARTITION BY xx ORDER BY xx). GROUP BY and full table aggregation are not supported.


It requires that all values are non-negative. Negative values will be ignored.

Example:


| value     |
|  -------- |
| 1     |
| 8     |
| 5     |
| 2     |
| 10     |
| 4    |


```sql

SELECT drawdown(value) OVER w;
-- output 0.75 (decline from 8 to 2)
```


**Supported Types**:

* [`list<number>`] 

### function earth_distance

```cpp
earth_distance()
```

**Description**:

Returns the great circle distance between two points on the surface of the Earth. Km as return unit. add a minus (-) sign if heading west (W) or south (S). 

**Parameters**: 

  * **ll1** First latitude in degree 
  * **ll2** First longitude in degree 
  * **rl1** second latitude in degree 
  * **rl2** Second longitude in degree


**Since**:
0.8.0



Example:

```sql

select earth_distance(40, 73, 41, 74)
-- output 139.7
```


**Supported Types**:

* [`bool`, `bool`, `bool`, `bool`]
* [`bool`, `bool`, `bool`, `date`]
* [`bool`, `bool`, `bool`, `number`]
* [`bool`, `bool`, `bool`, `string`]
* [`bool`, `bool`, `bool`, `timestamp`]
* [`bool`, `bool`, `date`, `bool`]
* [`bool`, `bool`, `date`, `date`]
* [`bool`, `bool`, `date`, `number`]
* [`bool`, `bool`, `date`, `string`]
* [`bool`, `bool`, `date`, `timestamp`]
* [`bool`, `bool`, `number`, `bool`]
* [`bool`, `bool`, `number`, `date`]
* [`bool`, `bool`, `number`, `number`]
* [`bool`, `bool`, `number`, `string`]
* [`bool`, `bool`, `number`, `timestamp`]
* [`bool`, `bool`, `string`, `bool`]
* [`bool`, `bool`, `string`, `date`]
* [`bool`, `bool`, `string`, `number`]
* [`bool`, `bool`, `string`, `string`]
* [`bool`, `bool`, `string`, `timestamp`]
* [`bool`, `bool`, `timestamp`, `bool`]
* [`bool`, `bool`, `timestamp`, `date`]
* [`bool`, `bool`, `timestamp`, `number`]
* [`bool`, `bool`, `timestamp`, `string`]
* [`bool`, `bool`, `timestamp`, `timestamp`]
* [`bool`, `date`, `bool`, `bool`]
* [`bool`, `date`, `bool`, `date`]
* [`bool`, `date`, `bool`, `number`]
* [`bool`, `date`, `bool`, `string`]
* [`bool`, `date`, `bool`, `timestamp`]
* [`bool`, `date`, `date`, `bool`]
* [`bool`, `date`, `date`, `date`]
* [`bool`, `date`, `date`, `number`]
* [`bool`, `date`, `date`, `string`]
* [`bool`, `date`, `date`, `timestamp`]
* [`bool`, `date`, `number`, `bool`]
* [`bool`, `date`, `number`, `date`]
* [`bool`, `date`, `number`, `number`]
* [`bool`, `date`, `number`, `string`]
* [`bool`, `date`, `number`, `timestamp`]
* [`bool`, `date`, `string`, `bool`]
* [`bool`, `date`, `string`, `date`]
* [`bool`, `date`, `string`, `number`]
* [`bool`, `date`, `string`, `string`]
* [`bool`, `date`, `string`, `timestamp`]
* [`bool`, `date`, `timestamp`, `bool`]
* [`bool`, `date`, `timestamp`, `date`]
* [`bool`, `date`, `timestamp`, `number`]
* [`bool`, `date`, `timestamp`, `string`]
* [`bool`, `date`, `timestamp`, `timestamp`]
* [`bool`, `number`, `bool`, `bool`]
* [`bool`, `number`, `bool`, `date`]
* [`bool`, `number`, `bool`, `number`]
* [`bool`, `number`, `bool`, `string`]
* [`bool`, `number`, `bool`, `timestamp`]
* [`bool`, `number`, `date`, `bool`]
* [`bool`, `number`, `date`, `date`]
* [`bool`, `number`, `date`, `number`]
* [`bool`, `number`, `date`, `string`]
* [`bool`, `number`, `date`, `timestamp`]
* [`bool`, `number`, `number`, `bool`]
* [`bool`, `number`, `number`, `date`]
* [`bool`, `number`, `number`, `number`]
* [`bool`, `number`, `number`, `string`]
* [`bool`, `number`, `number`, `timestamp`]
* [`bool`, `number`, `string`, `bool`]
* [`bool`, `number`, `string`, `date`]
* [`bool`, `number`, `string`, `number`]
* [`bool`, `number`, `string`, `string`]
* [`bool`, `number`, `string`, `timestamp`]
* [`bool`, `number`, `timestamp`, `bool`]
* [`bool`, `number`, `timestamp`, `date`]
* [`bool`, `number`, `timestamp`, `number`]
* [`bool`, `number`, `timestamp`, `string`]
* [`bool`, `number`, `timestamp`, `timestamp`]
* [`bool`, `string`, `bool`, `bool`]
* [`bool`, `string`, `bool`, `date`]
* [`bool`, `string`, `bool`, `number`]
* [`bool`, `string`, `bool`, `string`]
* [`bool`, `string`, `bool`, `timestamp`]
* [`bool`, `string`, `date`, `bool`]
* [`bool`, `string`, `date`, `date`]
* [`bool`, `string`, `date`, `number`]
* [`bool`, `string`, `date`, `string`]
* [`bool`, `string`, `date`, `timestamp`]
* [`bool`, `string`, `number`, `bool`]
* [`bool`, `string`, `number`, `date`]
* [`bool`, `string`, `number`, `number`]
* [`bool`, `string`, `number`, `string`]
* [`bool`, `string`, `number`, `timestamp`]
* [`bool`, `string`, `string`, `bool`]
* [`bool`, `string`, `string`, `date`]
* [`bool`, `string`, `string`, `number`]
* [`bool`, `string`, `string`, `string`]
* [`bool`, `string`, `string`, `timestamp`]
* [`bool`, `string`, `timestamp`, `bool`]
* [`bool`, `string`, `timestamp`, `date`]
* [`bool`, `string`, `timestamp`, `number`]
* [`bool`, `string`, `timestamp`, `string`]
* [`bool`, `string`, `timestamp`, `timestamp`]
* [`bool`, `timestamp`, `bool`, `bool`]
* [`bool`, `timestamp`, `bool`, `date`]
* [`bool`, `timestamp`, `bool`, `number`]
* [`bool`, `timestamp`, `bool`, `string`]
* [`bool`, `timestamp`, `bool`, `timestamp`]
* [`bool`, `timestamp`, `date`, `bool`]
* [`bool`, `timestamp`, `date`, `date`]
* [`bool`, `timestamp`, `date`, `number`]
* [`bool`, `timestamp`, `date`, `string`]
* [`bool`, `timestamp`, `date`, `timestamp`]
* [`bool`, `timestamp`, `number`, `bool`]
* [`bool`, `timestamp`, `number`, `date`]
* [`bool`, `timestamp`, `number`, `number`]
* [`bool`, `timestamp`, `number`, `string`]
* [`bool`, `timestamp`, `number`, `timestamp`]
* [`bool`, `timestamp`, `string`, `bool`]
* [`bool`, `timestamp`, `string`, `date`]
* [`bool`, `timestamp`, `string`, `number`]
* [`bool`, `timestamp`, `string`, `string`]
* [`bool`, `timestamp`, `string`, `timestamp`]
* [`bool`, `timestamp`, `timestamp`, `bool`]
* [`bool`, `timestamp`, `timestamp`, `date`]
* [`bool`, `timestamp`, `timestamp`, `number`]
* [`bool`, `timestamp`, `timestamp`, `string`]
* [`bool`, `timestamp`, `timestamp`, `timestamp`]
* [`date`, `bool`, `bool`, `bool`]
* [`date`, `bool`, `bool`, `date`]
* [`date`, `bool`, `bool`, `number`]
* [`date`, `bool`, `bool`, `string`]
* [`date`, `bool`, `bool`, `timestamp`]
* [`date`, `bool`, `date`, `bool`]
* [`date`, `bool`, `date`, `date`]
* [`date`, `bool`, `date`, `number`]
* [`date`, `bool`, `date`, `string`]
* [`date`, `bool`, `date`, `timestamp`]
* [`date`, `bool`, `number`, `bool`]
* [`date`, `bool`, `number`, `date`]
* [`date`, `bool`, `number`, `number`]
* [`date`, `bool`, `number`, `string`]
* [`date`, `bool`, `number`, `timestamp`]
* [`date`, `bool`, `string`, `bool`]
* [`date`, `bool`, `string`, `date`]
* [`date`, `bool`, `string`, `number`]
* [`date`, `bool`, `string`, `string`]
* [`date`, `bool`, `string`, `timestamp`]
* [`date`, `bool`, `timestamp`, `bool`]
* [`date`, `bool`, `timestamp`, `date`]
* [`date`, `bool`, `timestamp`, `number`]
* [`date`, `bool`, `timestamp`, `string`]
* [`date`, `bool`, `timestamp`, `timestamp`]
* [`date`, `date`, `bool`, `bool`]
* [`date`, `date`, `bool`, `date`]
* [`date`, `date`, `bool`, `number`]
* [`date`, `date`, `bool`, `string`]
* [`date`, `date`, `bool`, `timestamp`]
* [`date`, `date`, `date`, `bool`]
* [`date`, `date`, `date`, `date`]
* [`date`, `date`, `date`, `number`]
* [`date`, `date`, `date`, `string`]
* [`date`, `date`, `date`, `timestamp`]
* [`date`, `date`, `number`, `bool`]
* [`date`, `date`, `number`, `date`]
* [`date`, `date`, `number`, `number`]
* [`date`, `date`, `number`, `string`]
* [`date`, `date`, `number`, `timestamp`]
* [`date`, `date`, `string`, `bool`]
* [`date`, `date`, `string`, `date`]
* [`date`, `date`, `string`, `number`]
* [`date`, `date`, `string`, `string`]
* [`date`, `date`, `string`, `timestamp`]
* [`date`, `date`, `timestamp`, `bool`]
* [`date`, `date`, `timestamp`, `date`]
* [`date`, `date`, `timestamp`, `number`]
* [`date`, `date`, `timestamp`, `string`]
* [`date`, `date`, `timestamp`, `timestamp`]
* [`date`, `number`, `bool`, `bool`]
* [`date`, `number`, `bool`, `date`]
* [`date`, `number`, `bool`, `number`]
* [`date`, `number`, `bool`, `string`]
* [`date`, `number`, `bool`, `timestamp`]
* [`date`, `number`, `date`, `bool`]
* [`date`, `number`, `date`, `date`]
* [`date`, `number`, `date`, `number`]
* [`date`, `number`, `date`, `string`]
* [`date`, `number`, `date`, `timestamp`]
* [`date`, `number`, `number`, `bool`]
* [`date`, `number`, `number`, `date`]
* [`date`, `number`, `number`, `number`]
* [`date`, `number`, `number`, `string`]
* [`date`, `number`, `number`, `timestamp`]
* [`date`, `number`, `string`, `bool`]
* [`date`, `number`, `string`, `date`]
* [`date`, `number`, `string`, `number`]
* [`date`, `number`, `string`, `string`]
* [`date`, `number`, `string`, `timestamp`]
* [`date`, `number`, `timestamp`, `bool`]
* [`date`, `number`, `timestamp`, `date`]
* [`date`, `number`, `timestamp`, `number`]
* [`date`, `number`, `timestamp`, `string`]
* [`date`, `number`, `timestamp`, `timestamp`]
* [`date`, `string`, `bool`, `bool`]
* [`date`, `string`, `bool`, `date`]
* [`date`, `string`, `bool`, `number`]
* [`date`, `string`, `bool`, `string`]
* [`date`, `string`, `bool`, `timestamp`]
* [`date`, `string`, `date`, `bool`]
* [`date`, `string`, `date`, `date`]
* [`date`, `string`, `date`, `number`]
* [`date`, `string`, `date`, `string`]
* [`date`, `string`, `date`, `timestamp`]
* [`date`, `string`, `number`, `bool`]
* [`date`, `string`, `number`, `date`]
* [`date`, `string`, `number`, `number`]
* [`date`, `string`, `number`, `string`]
* [`date`, `string`, `number`, `timestamp`]
* [`date`, `string`, `string`, `bool`]
* [`date`, `string`, `string`, `date`]
* [`date`, `string`, `string`, `number`]
* [`date`, `string`, `string`, `string`]
* [`date`, `string`, `string`, `timestamp`]
* [`date`, `string`, `timestamp`, `bool`]
* [`date`, `string`, `timestamp`, `date`]
* [`date`, `string`, `timestamp`, `number`]
* [`date`, `string`, `timestamp`, `string`]
* [`date`, `string`, `timestamp`, `timestamp`]
* [`date`, `timestamp`, `bool`, `bool`]
* [`date`, `timestamp`, `bool`, `date`]
* [`date`, `timestamp`, `bool`, `number`]
* [`date`, `timestamp`, `bool`, `string`]
* [`date`, `timestamp`, `bool`, `timestamp`]
* [`date`, `timestamp`, `date`, `bool`]
* [`date`, `timestamp`, `date`, `date`]
* [`date`, `timestamp`, `date`, `number`]
* [`date`, `timestamp`, `date`, `string`]
* [`date`, `timestamp`, `date`, `timestamp`]
* [`date`, `timestamp`, `number`, `bool`]
* [`date`, `timestamp`, `number`, `date`]
* [`date`, `timestamp`, `number`, `number`]
* [`date`, `timestamp`, `number`, `string`]
* [`date`, `timestamp`, `number`, `timestamp`]
* [`date`, `timestamp`, `string`, `bool`]
* [`date`, `timestamp`, `string`, `date`]
* [`date`, `timestamp`, `string`, `number`]
* [`date`, `timestamp`, `string`, `string`]
* [`date`, `timestamp`, `string`, `timestamp`]
* [`date`, `timestamp`, `timestamp`, `bool`]
* [`date`, `timestamp`, `timestamp`, `date`]
* [`date`, `timestamp`, `timestamp`, `number`]
* [`date`, `timestamp`, `timestamp`, `string`]
* [`date`, `timestamp`, `timestamp`, `timestamp`]
* [`number`, `bool`, `bool`, `bool`]
* [`number`, `bool`, `bool`, `date`]
* [`number`, `bool`, `bool`, `number`]
* [`number`, `bool`, `bool`, `string`]
* [`number`, `bool`, `bool`, `timestamp`]
* [`number`, `bool`, `date`, `bool`]
* [`number`, `bool`, `date`, `date`]
* [`number`, `bool`, `date`, `number`]
* [`number`, `bool`, `date`, `string`]
* [`number`, `bool`, `date`, `timestamp`]
* [`number`, `bool`, `number`, `bool`]
* [`number`, `bool`, `number`, `date`]
* [`number`, `bool`, `number`, `number`]
* [`number`, `bool`, `number`, `string`]
* [`number`, `bool`, `number`, `timestamp`]
* [`number`, `bool`, `string`, `bool`]
* [`number`, `bool`, `string`, `date`]
* [`number`, `bool`, `string`, `number`]
* [`number`, `bool`, `string`, `string`]
* [`number`, `bool`, `string`, `timestamp`]
* [`number`, `bool`, `timestamp`, `bool`]
* [`number`, `bool`, `timestamp`, `date`]
* [`number`, `bool`, `timestamp`, `number`]
* [`number`, `bool`, `timestamp`, `string`]
* [`number`, `bool`, `timestamp`, `timestamp`]
* [`number`, `date`, `bool`, `bool`]
* [`number`, `date`, `bool`, `date`]
* [`number`, `date`, `bool`, `number`]
* [`number`, `date`, `bool`, `string`]
* [`number`, `date`, `bool`, `timestamp`]
* [`number`, `date`, `date`, `bool`]
* [`number`, `date`, `date`, `date`]
* [`number`, `date`, `date`, `number`]
* [`number`, `date`, `date`, `string`]
* [`number`, `date`, `date`, `timestamp`]
* [`number`, `date`, `number`, `bool`]
* [`number`, `date`, `number`, `date`]
* [`number`, `date`, `number`, `number`]
* [`number`, `date`, `number`, `string`]
* [`number`, `date`, `number`, `timestamp`]
* [`number`, `date`, `string`, `bool`]
* [`number`, `date`, `string`, `date`]
* [`number`, `date`, `string`, `number`]
* [`number`, `date`, `string`, `string`]
* [`number`, `date`, `string`, `timestamp`]
* [`number`, `date`, `timestamp`, `bool`]
* [`number`, `date`, `timestamp`, `date`]
* [`number`, `date`, `timestamp`, `number`]
* [`number`, `date`, `timestamp`, `string`]
* [`number`, `date`, `timestamp`, `timestamp`]
* [`number`, `number`, `bool`, `bool`]
* [`number`, `number`, `bool`, `date`]
* [`number`, `number`, `bool`, `number`]
* [`number`, `number`, `bool`, `string`]
* [`number`, `number`, `bool`, `timestamp`]
* [`number`, `number`, `date`, `bool`]
* [`number`, `number`, `date`, `date`]
* [`number`, `number`, `date`, `number`]
* [`number`, `number`, `date`, `string`]
* [`number`, `number`, `date`, `timestamp`]
* [`number`, `number`, `number`, `bool`]
* [`number`, `number`, `number`, `date`]
* [`number`, `number`, `number`, `number`]
* [`number`, `number`, `number`, `string`]
* [`number`, `number`, `number`, `timestamp`]
* [`number`, `number`, `string`, `bool`]
* [`number`, `number`, `string`, `date`]
* [`number`, `number`, `string`, `number`]
* [`number`, `number`, `string`, `string`]
* [`number`, `number`, `string`, `timestamp`]
* [`number`, `number`, `timestamp`, `bool`]
* [`number`, `number`, `timestamp`, `date`]
* [`number`, `number`, `timestamp`, `number`]
* [`number`, `number`, `timestamp`, `string`]
* [`number`, `number`, `timestamp`, `timestamp`]
* [`number`, `string`, `bool`, `bool`]
* [`number`, `string`, `bool`, `date`]
* [`number`, `string`, `bool`, `number`]
* [`number`, `string`, `bool`, `string`]
* [`number`, `string`, `bool`, `timestamp`]
* [`number`, `string`, `date`, `bool`]
* [`number`, `string`, `date`, `date`]
* [`number`, `string`, `date`, `number`]
* [`number`, `string`, `date`, `string`]
* [`number`, `string`, `date`, `timestamp`]
* [`number`, `string`, `number`, `bool`]
* [`number`, `string`, `number`, `date`]
* [`number`, `string`, `number`, `number`]
* [`number`, `string`, `number`, `string`]
* [`number`, `string`, `number`, `timestamp`]
* [`number`, `string`, `string`, `bool`]
* [`number`, `string`, `string`, `date`]
* [`number`, `string`, `string`, `number`]
* [`number`, `string`, `string`, `string`]
* [`number`, `string`, `string`, `timestamp`]
* [`number`, `string`, `timestamp`, `bool`]
* [`number`, `string`, `timestamp`, `date`]
* [`number`, `string`, `timestamp`, `number`]
* [`number`, `string`, `timestamp`, `string`]
* [`number`, `string`, `timestamp`, `timestamp`]
* [`number`, `timestamp`, `bool`, `bool`]
* [`number`, `timestamp`, `bool`, `date`]
* [`number`, `timestamp`, `bool`, `number`]
* [`number`, `timestamp`, `bool`, `string`]
* [`number`, `timestamp`, `bool`, `timestamp`]
* [`number`, `timestamp`, `date`, `bool`]
* [`number`, `timestamp`, `date`, `date`]
* [`number`, `timestamp`, `date`, `number`]
* [`number`, `timestamp`, `date`, `string`]
* [`number`, `timestamp`, `date`, `timestamp`]
* [`number`, `timestamp`, `number`, `bool`]
* [`number`, `timestamp`, `number`, `date`]
* [`number`, `timestamp`, `number`, `number`]
* [`number`, `timestamp`, `number`, `string`]
* [`number`, `timestamp`, `number`, `timestamp`]
* [`number`, `timestamp`, `string`, `bool`]
* [`number`, `timestamp`, `string`, `date`]
* [`number`, `timestamp`, `string`, `number`]
* [`number`, `timestamp`, `string`, `string`]
* [`number`, `timestamp`, `string`, `timestamp`]
* [`number`, `timestamp`, `timestamp`, `bool`]
* [`number`, `timestamp`, `timestamp`, `date`]
* [`number`, `timestamp`, `timestamp`, `number`]
* [`number`, `timestamp`, `timestamp`, `string`]
* [`number`, `timestamp`, `timestamp`, `timestamp`]
* [`string`, `bool`, `bool`, `bool`]
* [`string`, `bool`, `bool`, `date`]
* [`string`, `bool`, `bool`, `number`]
* [`string`, `bool`, `bool`, `string`]
* [`string`, `bool`, `bool`, `timestamp`]
* [`string`, `bool`, `date`, `bool`]
* [`string`, `bool`, `date`, `date`]
* [`string`, `bool`, `date`, `number`]
* [`string`, `bool`, `date`, `string`]
* [`string`, `bool`, `date`, `timestamp`]
* [`string`, `bool`, `number`, `bool`]
* [`string`, `bool`, `number`, `date`]
* [`string`, `bool`, `number`, `number`]
* [`string`, `bool`, `number`, `string`]
* [`string`, `bool`, `number`, `timestamp`]
* [`string`, `bool`, `string`, `bool`]
* [`string`, `bool`, `string`, `date`]
* [`string`, `bool`, `string`, `number`]
* [`string`, `bool`, `string`, `string`]
* [`string`, `bool`, `string`, `timestamp`]
* [`string`, `bool`, `timestamp`, `bool`]
* [`string`, `bool`, `timestamp`, `date`]
* [`string`, `bool`, `timestamp`, `number`]
* [`string`, `bool`, `timestamp`, `string`]
* [`string`, `bool`, `timestamp`, `timestamp`]
* [`string`, `date`, `bool`, `bool`]
* [`string`, `date`, `bool`, `date`]
* [`string`, `date`, `bool`, `number`]
* [`string`, `date`, `bool`, `string`]
* [`string`, `date`, `bool`, `timestamp`]
* [`string`, `date`, `date`, `bool`]
* [`string`, `date`, `date`, `date`]
* [`string`, `date`, `date`, `number`]
* [`string`, `date`, `date`, `string`]
* [`string`, `date`, `date`, `timestamp`]
* [`string`, `date`, `number`, `bool`]
* [`string`, `date`, `number`, `date`]
* [`string`, `date`, `number`, `number`]
* [`string`, `date`, `number`, `string`]
* [`string`, `date`, `number`, `timestamp`]
* [`string`, `date`, `string`, `bool`]
* [`string`, `date`, `string`, `date`]
* [`string`, `date`, `string`, `number`]
* [`string`, `date`, `string`, `string`]
* [`string`, `date`, `string`, `timestamp`]
* [`string`, `date`, `timestamp`, `bool`]
* [`string`, `date`, `timestamp`, `date`]
* [`string`, `date`, `timestamp`, `number`]
* [`string`, `date`, `timestamp`, `string`]
* [`string`, `date`, `timestamp`, `timestamp`]
* [`string`, `number`, `bool`, `bool`]
* [`string`, `number`, `bool`, `date`]
* [`string`, `number`, `bool`, `number`]
* [`string`, `number`, `bool`, `string`]
* [`string`, `number`, `bool`, `timestamp`]
* [`string`, `number`, `date`, `bool`]
* [`string`, `number`, `date`, `date`]
* [`string`, `number`, `date`, `number`]
* [`string`, `number`, `date`, `string`]
* [`string`, `number`, `date`, `timestamp`]
* [`string`, `number`, `number`, `bool`]
* [`string`, `number`, `number`, `date`]
* [`string`, `number`, `number`, `number`]
* [`string`, `number`, `number`, `string`]
* [`string`, `number`, `number`, `timestamp`]
* [`string`, `number`, `string`, `bool`]
* [`string`, `number`, `string`, `date`]
* [`string`, `number`, `string`, `number`]
* [`string`, `number`, `string`, `string`]
* [`string`, `number`, `string`, `timestamp`]
* [`string`, `number`, `timestamp`, `bool`]
* [`string`, `number`, `timestamp`, `date`]
* [`string`, `number`, `timestamp`, `number`]
* [`string`, `number`, `timestamp`, `string`]
* [`string`, `number`, `timestamp`, `timestamp`]
* [`string`, `string`, `bool`, `bool`]
* [`string`, `string`, `bool`, `date`]
* [`string`, `string`, `bool`, `number`]
* [`string`, `string`, `bool`, `string`]
* [`string`, `string`, `bool`, `timestamp`]
* [`string`, `string`, `date`, `bool`]
* [`string`, `string`, `date`, `date`]
* [`string`, `string`, `date`, `number`]
* [`string`, `string`, `date`, `string`]
* [`string`, `string`, `date`, `timestamp`]
* [`string`, `string`, `number`, `bool`]
* [`string`, `string`, `number`, `date`]
* [`string`, `string`, `number`, `number`]
* [`string`, `string`, `number`, `string`]
* [`string`, `string`, `number`, `timestamp`]
* [`string`, `string`, `string`, `bool`]
* [`string`, `string`, `string`, `date`]
* [`string`, `string`, `string`, `number`]
* [`string`, `string`, `string`, `string`]
* [`string`, `string`, `string`, `timestamp`]
* [`string`, `string`, `timestamp`, `bool`]
* [`string`, `string`, `timestamp`, `date`]
* [`string`, `string`, `timestamp`, `number`]
* [`string`, `string`, `timestamp`, `string`]
* [`string`, `string`, `timestamp`, `timestamp`]
* [`string`, `timestamp`, `bool`, `bool`]
* [`string`, `timestamp`, `bool`, `date`]
* [`string`, `timestamp`, `bool`, `number`]
* [`string`, `timestamp`, `bool`, `string`]
* [`string`, `timestamp`, `bool`, `timestamp`]
* [`string`, `timestamp`, `date`, `bool`]
* [`string`, `timestamp`, `date`, `date`]
* [`string`, `timestamp`, `date`, `number`]
* [`string`, `timestamp`, `date`, `string`]
* [`string`, `timestamp`, `date`, `timestamp`]
* [`string`, `timestamp`, `number`, `bool`]
* [`string`, `timestamp`, `number`, `date`]
* [`string`, `timestamp`, `number`, `number`]
* [`string`, `timestamp`, `number`, `string`]
* [`string`, `timestamp`, `number`, `timestamp`]
* [`string`, `timestamp`, `string`, `bool`]
* [`string`, `timestamp`, `string`, `date`]
* [`string`, `timestamp`, `string`, `number`]
* [`string`, `timestamp`, `string`, `string`]
* [`string`, `timestamp`, `string`, `timestamp`]
* [`string`, `timestamp`, `timestamp`, `bool`]
* [`string`, `timestamp`, `timestamp`, `date`]
* [`string`, `timestamp`, `timestamp`, `number`]
* [`string`, `timestamp`, `timestamp`, `string`]
* [`string`, `timestamp`, `timestamp`, `timestamp`]
* [`timestamp`, `bool`, `bool`, `bool`]
* [`timestamp`, `bool`, `bool`, `date`]
* [`timestamp`, `bool`, `bool`, `number`]
* [`timestamp`, `bool`, `bool`, `string`]
* [`timestamp`, `bool`, `bool`, `timestamp`]
* [`timestamp`, `bool`, `date`, `bool`]
* [`timestamp`, `bool`, `date`, `date`]
* [`timestamp`, `bool`, `date`, `number`]
* [`timestamp`, `bool`, `date`, `string`]
* [`timestamp`, `bool`, `date`, `timestamp`]
* [`timestamp`, `bool`, `number`, `bool`]
* [`timestamp`, `bool`, `number`, `date`]
* [`timestamp`, `bool`, `number`, `number`]
* [`timestamp`, `bool`, `number`, `string`]
* [`timestamp`, `bool`, `number`, `timestamp`]
* [`timestamp`, `bool`, `string`, `bool`]
* [`timestamp`, `bool`, `string`, `date`]
* [`timestamp`, `bool`, `string`, `number`]
* [`timestamp`, `bool`, `string`, `string`]
* [`timestamp`, `bool`, `string`, `timestamp`]
* [`timestamp`, `bool`, `timestamp`, `bool`]
* [`timestamp`, `bool`, `timestamp`, `date`]
* [`timestamp`, `bool`, `timestamp`, `number`]
* [`timestamp`, `bool`, `timestamp`, `string`]
* [`timestamp`, `bool`, `timestamp`, `timestamp`]
* [`timestamp`, `date`, `bool`, `bool`]
* [`timestamp`, `date`, `bool`, `date`]
* [`timestamp`, `date`, `bool`, `number`]
* [`timestamp`, `date`, `bool`, `string`]
* [`timestamp`, `date`, `bool`, `timestamp`]
* [`timestamp`, `date`, `date`, `bool`]
* [`timestamp`, `date`, `date`, `date`]
* [`timestamp`, `date`, `date`, `number`]
* [`timestamp`, `date`, `date`, `string`]
* [`timestamp`, `date`, `date`, `timestamp`]
* [`timestamp`, `date`, `number`, `bool`]
* [`timestamp`, `date`, `number`, `date`]
* [`timestamp`, `date`, `number`, `number`]
* [`timestamp`, `date`, `number`, `string`]
* [`timestamp`, `date`, `number`, `timestamp`]
* [`timestamp`, `date`, `string`, `bool`]
* [`timestamp`, `date`, `string`, `date`]
* [`timestamp`, `date`, `string`, `number`]
* [`timestamp`, `date`, `string`, `string`]
* [`timestamp`, `date`, `string`, `timestamp`]
* [`timestamp`, `date`, `timestamp`, `bool`]
* [`timestamp`, `date`, `timestamp`, `date`]
* [`timestamp`, `date`, `timestamp`, `number`]
* [`timestamp`, `date`, `timestamp`, `string`]
* [`timestamp`, `date`, `timestamp`, `timestamp`]
* [`timestamp`, `number`, `bool`, `bool`]
* [`timestamp`, `number`, `bool`, `date`]
* [`timestamp`, `number`, `bool`, `number`]
* [`timestamp`, `number`, `bool`, `string`]
* [`timestamp`, `number`, `bool`, `timestamp`]
* [`timestamp`, `number`, `date`, `bool`]
* [`timestamp`, `number`, `date`, `date`]
* [`timestamp`, `number`, `date`, `number`]
* [`timestamp`, `number`, `date`, `string`]
* [`timestamp`, `number`, `date`, `timestamp`]
* [`timestamp`, `number`, `number`, `bool`]
* [`timestamp`, `number`, `number`, `date`]
* [`timestamp`, `number`, `number`, `number`]
* [`timestamp`, `number`, `number`, `string`]
* [`timestamp`, `number`, `number`, `timestamp`]
* [`timestamp`, `number`, `string`, `bool`]
* [`timestamp`, `number`, `string`, `date`]
* [`timestamp`, `number`, `string`, `number`]
* [`timestamp`, `number`, `string`, `string`]
* [`timestamp`, `number`, `string`, `timestamp`]
* [`timestamp`, `number`, `timestamp`, `bool`]
* [`timestamp`, `number`, `timestamp`, `date`]
* [`timestamp`, `number`, `timestamp`, `number`]
* [`timestamp`, `number`, `timestamp`, `string`]
* [`timestamp`, `number`, `timestamp`, `timestamp`]
* [`timestamp`, `string`, `bool`, `bool`]
* [`timestamp`, `string`, `bool`, `date`]
* [`timestamp`, `string`, `bool`, `number`]
* [`timestamp`, `string`, `bool`, `string`]
* [`timestamp`, `string`, `bool`, `timestamp`]
* [`timestamp`, `string`, `date`, `bool`]
* [`timestamp`, `string`, `date`, `date`]
* [`timestamp`, `string`, `date`, `number`]
* [`timestamp`, `string`, `date`, `string`]
* [`timestamp`, `string`, `date`, `timestamp`]
* [`timestamp`, `string`, `number`, `bool`]
* [`timestamp`, `string`, `number`, `date`]
* [`timestamp`, `string`, `number`, `number`]
* [`timestamp`, `string`, `number`, `string`]
* [`timestamp`, `string`, `number`, `timestamp`]
* [`timestamp`, `string`, `string`, `bool`]
* [`timestamp`, `string`, `string`, `date`]
* [`timestamp`, `string`, `string`, `number`]
* [`timestamp`, `string`, `string`, `string`]
* [`timestamp`, `string`, `string`, `timestamp`]
* [`timestamp`, `string`, `timestamp`, `bool`]
* [`timestamp`, `string`, `timestamp`, `date`]
* [`timestamp`, `string`, `timestamp`, `number`]
* [`timestamp`, `string`, `timestamp`, `string`]
* [`timestamp`, `string`, `timestamp`, `timestamp`]
* [`timestamp`, `timestamp`, `bool`, `bool`]
* [`timestamp`, `timestamp`, `bool`, `date`]
* [`timestamp`, `timestamp`, `bool`, `number`]
* [`timestamp`, `timestamp`, `bool`, `string`]
* [`timestamp`, `timestamp`, `bool`, `timestamp`]
* [`timestamp`, `timestamp`, `date`, `bool`]
* [`timestamp`, `timestamp`, `date`, `date`]
* [`timestamp`, `timestamp`, `date`, `number`]
* [`timestamp`, `timestamp`, `date`, `string`]
* [`timestamp`, `timestamp`, `date`, `timestamp`]
* [`timestamp`, `timestamp`, `number`, `bool`]
* [`timestamp`, `timestamp`, `number`, `date`]
* [`timestamp`, `timestamp`, `number`, `number`]
* [`timestamp`, `timestamp`, `number`, `string`]
* [`timestamp`, `timestamp`, `number`, `timestamp`]
* [`timestamp`, `timestamp`, `string`, `bool`]
* [`timestamp`, `timestamp`, `string`, `date`]
* [`timestamp`, `timestamp`, `string`, `number`]
* [`timestamp`, `timestamp`, `string`, `string`]
* [`timestamp`, `timestamp`, `string`, `timestamp`]
* [`timestamp`, `timestamp`, `timestamp`, `bool`]
* [`timestamp`, `timestamp`, `timestamp`, `date`]
* [`timestamp`, `timestamp`, `timestamp`, `number`]
* [`timestamp`, `timestamp`, `timestamp`, `string`]
* [`timestamp`, `timestamp`, `timestamp`, `timestamp`] 

### function entropy

```cpp
entropy()
```

**Description**:

Calculate Shannon entropy of a column of values. Null values are skipped. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.8.0



Example:

| col1 | | 1 | | 1 | | 2 | | 3 | ```sql

select entropy(col1) from t1
-- output 1.5
```


**Supported Types**:

* [`list<bool>`]
* [`list<date>`]
* [`list<number>`]
* [`list<string>`]
* [`list<timestamp>`] 

### function ew_avg

```cpp
ew_avg()
```

**Description**:

Compute exponentially-weighted average of values. It's equivalent to pandas ewm(alpha=<alpha>, adjust=True, ignore_na=True, com=None, span=None, halflife=None, min_periods=0) 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **alpha** Specify smoothing factor alpha (0 <= alpha <= 1). If NULL or 0, fall back to normal `avg`


**Since**:
0.7.2


It requires that values are ordered so that it can only be used with WINDOW (PARTITION BY xx ORDER BY xx). Undefined behaviour if it is used with GROUP BY and full table aggregation.


Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT ew_avg(value, 0.5) OVER w;
-- output 3.161290
```


**Supported Types**:

* [`list<number>`, `list<double>`] 

### function exp

```cpp
exp()
```

**Description**:

Return the value of e (the base of natural logarithms) raised to the power of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


```sql

SELECT EXP(0);
-- output 1
```


**Supported Types**:

* [`number`] 

### function farm_fingerprint

```cpp
farm_fingerprint()
```

**Description**:


alias to hash64 

### function first_value

```cpp
first_value()
```

**Description**:

Returns the value of expr from the latest row (last row) of the window frame. 

**Since**:
0.1.0


Example:

```sql

select id, gp, ts, first_value(ts) over w as agg from t1
window w as (partition by gp order by ts rows between 3 preceding and current row);
```


| id    | gp    | ts    | agg     |
|  -------- | -------- | -------- | -------- |
| 1    | 100    | 98    | 98     |
| 2    | 100    | 99    | 99     |
| 3    | 100    | 100    | 100    |



**Supported Types**: 

### function float

```cpp
float()
```

**Description**:

Cast string expression to float. 

**Since**:
0.1.0


Example:

```sql

select float("1.23");
-- output 1.23
```


**Supported Types**:

* [`string`] 

### function floor

```cpp
floor()
```

**Description**:

Return the largest integer value not less than the expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT FLOOR(1.23);
-- output 1
```


**Supported Types**:

* [`bool`]
* [`number`] 

### function fz_join

```cpp
fz_join()
```

**Description**:


alias to join 

### function fz_split

```cpp
fz_split()
```

**Description**:


alias to split 

### function fz_split_by_key

```cpp
fz_split_by_key()
```

**Description**:


alias to split_by_key 

### function fz_split_by_value

```cpp
fz_split_by_value()
```

**Description**:


alias to split_by_value 

### function fz_top1_ratio

```cpp
fz_top1_ratio()
```

**Description**:


alias to top1_ratio 

### function fz_topn_frequency

```cpp
fz_topn_frequency()
```

**Description**:


alias to topn_frequency 

### function fz_window_split

```cpp
fz_window_split()
```

**Description**:


alias to window_split 

### function fz_window_split_by_key

```cpp
fz_window_split_by_key()
```

**Description**:


alias to window_split_by_key 

### function fz_window_split_by_value

```cpp
fz_window_split_by_value()
```

**Description**:


alias to window_split_by_value 

### function hash64

```cpp
hash64()
```

**Description**:

Returns a hash value of the arguments. It is not a cryptographic hash function and should not be used as such. 

**Since**:
0.7.0


Example:

```sql

SELECT hash64(cast(90 as int));
--output -3754664774081171349
```


**Supported Types**:

* [`bool`]
* [`date`]
* [`number`]
* [`string`]
* [`timestamp`] 

### function hex

```cpp
hex()
```

**Description**:

Convert integer to hexadecimal. 

**Since**:
0.6.0


Example:

```sql

select hex("Spark SQL");
--output "537061726B2053514C"
```


**Supported Types**:

* [`number`]
* [`string`] 

### function hour

```cpp
hour()
```

**Description**:

Return the hour for a timestamp. 

**Since**:
0.1.0


Example:

```sql

select hour(timestamp(1590115420000));
-- output 10
```


**Supported Types**:

* [`int64`]
* [`timestamp`] 

### function identity

```cpp
identity()
```

**Description**:

Return value. 

**Since**:
0.1.0


Example:

```sql

select identity(1);
-- output 1
```


**Supported Types**:

* [`bool`]
* [`date`]
* [`number`]
* [`string`]
* [`timestamp`] 

### function if_null

```cpp
if_null()
```

**Description**:

If input is not null, return input value; else return default value. 

**Parameters**: 

  * **input** Input value 
  * **default** Default value if input is null


**Since**:
0.1.0


Example:

```sql

SELECT if_null("hello", "default"), if_null(cast(null as string), "default");
-- output ["hello", "default"]
```


**Supported Types**:

* [`bool`, `bool`]
* [`bool`, `date`]
* [`bool`, `number`]
* [`bool`, `string`]
* [`bool`, `timestamp`]
* [`date`, `bool`]
* [`date`, `date`]
* [`date`, `number`]
* [`date`, `string`]
* [`date`, `timestamp`]
* [`number`, `bool`]
* [`number`, `date`]
* [`number`, `number`]
* [`number`, `string`]
* [`number`, `timestamp`]
* [`string`, `bool`]
* [`string`, `date`]
* [`string`, `number`]
* [`string`, `string`]
* [`string`, `timestamp`]
* [`timestamp`, `bool`]
* [`timestamp`, `date`]
* [`timestamp`, `number`]
* [`timestamp`, `string`]
* [`timestamp`, `timestamp`] 

### function ifnull

```cpp
ifnull()
```

**Description**:


alias to if_null 

### function ilike_match

```cpp
ilike_match()
```

**Description**:

pattern match same as ILIKE predicate 

**Parameters**: 

  * **target** string to match
  * **pattern** the glob match pattern


**Since**:
0.4.0


Rules:

1. Special characters:
    * underscore(_): exact one character
    * precent(%): zero or more characters.
2. Escape character: backslash() is the default escape character
3. case insensitive
4. backslash: sql string literal use backslash() for escape sequences, write '\' as backslash itself
5. Return NULL if target or pattern is NULL

Example:

```sql

select ilike_match('Mike', 'Mi_k')
-- output: true

select ilike_match('Mike', 'mi_k')
-- output: true
```


**Supported Types**:

* [`string`, `string`]
* [`string`, `string`, `string`] 

### function inc

```cpp
inc()
```

**Description**:

Return expression + 1. 

**Since**:
0.1.0


Example:

```sql

select inc(1);
-- output 2
```


**Supported Types**:

* [`number`] 

### function int16

```cpp
int16()
```

**Description**:

Cast string expression to int16. 

**Since**:
0.1.0


Example:

```sql

select int16("123");
-- output 123
```


**Supported Types**:

* [`string`] 

### function int32

```cpp
int32()
```

**Description**:

Cast string expression to int32. 

**Since**:
0.1.0


Example:

```sql

select int32("12345");
-- output 12345
```


**Supported Types**:

* [`string`] 

### function int64

```cpp
int64()
```

**Description**:

Cast string expression to int64. 

**Since**:
0.1.0


Example:

```sql

select int64("1590115420000");
-- output 1590115420000
```


**Supported Types**:

* [`string`] 

### function is_null

```cpp
is_null()
```

**Description**:

Check if input value is null, return bool. 

**Parameters**: 

  * **input** Input value


**Since**:
0.1.0



**Supported Types**:

* [`bool`]
* [`date`]
* [`number`]
* [`string`]
* [`timestamp`] 

### function isnull

```cpp
isnull()
```

**Description**:


alias to is_null 

### function join

```cpp
join()
```

**Description**:

For each string value from specified column of window, join by delimeter. Null values are skipped. 

**Parameters**: 

  * **input** List of string to join 
  * **delimeter** Join delimeter


**Since**:
0.1.0



Example:

```sql

select fz_join(fz_split("k1:v1,k2:v2", ","), " ");
--  "k1:v1 k2:v2"
```


**Supported Types**:

* [`list<string>`, `string`] 

### function lag

```cpp
lag()
```

**Description**:

Returns value evaluated at the row that is offset rows before the current row within the partition. Offset is evaluated with respect to the current row. 

**Parameters**: 

  * **offset** The number of rows forwarded from the current row, must not negative


Note: This function equals the `[at()](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-at)` function.

The offset in window is `nth_value()`, not `[lag()](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-lag)/at()`. The old `[at()](/openmldb_sql/functions_and_operators/Files/udfs_8h.md#function-at)`(version < 0.5.0) is start from the last row of window(may not be the current row), it's more like `nth_value()`


Example:


| c1    | c2     |
|  -------- | -------- |
| 0    | 1     |
| 1    | 1     |
| 2    | 2     |
| 3    | 2     |
| 4    | 2    |


```sql

SELECT lag(c1, 1) over w as co from t1 window w as(partition by c2 order by c1 rows between unbounded preceding and current row);
-- output
-- | co |
-- |----|
-- |NULL|
-- |0   |
-- |NULL|
-- |2   |
-- |3   |
SELECT at(c1, 1) over w as co from t1 window w as(partition by c2 order by c1 rows between unbounded preceding and current row);
-- output
-- | co |
-- |----|
-- |NULL|
-- |0   |
-- |NULL|
-- |2   |
-- |3   |
```

**Supported Types**:

* [`list<bool>`, `int64`]
* [`list<date>`, `int64`]
* [`list<number>`, `int64`]
* [`list<string>`, `int64`]
* [`list<timestamp>`, `int64`] 

### function last_day

```cpp
last_day()
```

**Description**:

Return the last day of the month to which the date belongs to. 

**Since**:
0.6.1


Example:

```sql

select last_day(timestamp("2020-05-22 10:43:40"));
-- output 2020-05-31
select last_day(timestamp("2020-02-12 10:43:40"));
-- output 2020-02-29
select last_day(timestamp("2021-02-12"));
-- output 2021-02-28
```


**Supported Types**:

* [`date`]
* [`int64`]
* [`timestamp`] 

### function lcase

```cpp
lcase()
```

**Description**:

Convert all the characters to lowercase. Note that characters with values > 127 are simply returned. 

**Since**:
0.5.0


Example:

```sql

SELECT LCASE('SQl') as str1;
--output "sql"
```


**Supported Types**:

* [`string`] 

### function like_match

```cpp
like_match()
```

**Description**:

pattern match same as LIKE predicate 

**Parameters**: 

  * **target** string to match
  * **pattern** the glob match pattern


**Since**:
0.4.0


Rules:

1. Special characters:
    * underscore(_): exact one character
    * precent(%): zero or more characters.
2. Escape character is backslash() by default
3. case sensitive
4. backslash: sql string literal use backslash() for escape sequences, write '\' as backslash itself
5. if one or more of target, pattern then the result is null

Example:

```sql

select like_match('Mike', 'Mi_k')
-- output: true
select like_match('Mike', 'mi_k')
-- output: false
```


**Supported Types**:

* [`string`, `string`]
* [`string`, `string`, `string`] 

### function ln

```cpp
ln()
```

**Description**:

Return the natural logarithm of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT LN(1);
-- output 0.000000
```


**Supported Types**:

* [`bool`]
* [`number`] 

### function log

```cpp
log()
```

**Description**:

log(base, expr) If called with one parameter, this function returns the natural logarithm of expr. If called with two parameters, this function returns the logarithm of expr to the base. 

**Parameters**: 

  * **base** 
  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT LOG(1);
-- output 0.000000

SELECT LOG(10,100);
-- output 2
```


**Supported Types**:

* [`bool`]
* [`bool`, `bool`]
* [`bool`, `date`]
* [`bool`, `number`]
* [`bool`, `string`]
* [`bool`, `timestamp`]
* [`number`]
* [`number`, `bool`]
* [`number`, `date`]
* [`number`, `number`]
* [`number`, `string`]
* [`number`, `timestamp`] 

### function log10

```cpp
log10()
```

**Description**:

Return the base-10 logarithm of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT LOG10(100);
-- output 2
```


**Supported Types**:

* [`bool`]
* [`number`] 

### function log2

```cpp
log2()
```

**Description**:

Return the base-2 logarithm of expr. 

**Parameters**: 

  * **expr** 


**Since**:
0.1.0


Example:

```sql

SELECT LOG2(65536);
-- output 16
```


**Supported Types**:

* [`bool`]
* [`number`] 

### function lower

```cpp
lower()
```

**Description**:


alias to lcase 

### function make_tuple

```cpp
make_tuple()
```

**Description**:


**Supported Types**:

* [...] 

### function max

```cpp
max()
```

**Description**:

Compute maximum of values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT max(value) OVER w;
-- output 4
```


**Supported Types**:

* [`list<date>`]
* [`list<number>`]
* [`list<string>`]
* [`list<timestamp>`] 

### function max_cate

```cpp
max_cate()
```

**Description**:

Compute maximum of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | catagory     |
|  -------- | -------- |
| 0    | x     |
| 1    | y     |
| 2    | x     |
| 3    | y     |
| 4    | x    |


```sql

SELECT max_cate(value, catagory) OVER w;
-- output "x:4,y:3"
```

**Supported Types**:

* [`list<number>`, `list<date>`]
* [`list<number>`, `list<int16>`]
* [`list<number>`, `list<int32>`]
* [`list<number>`, `list<int64>`]
* [`list<number>`, `list<string>`]
* [`list<number>`, `list<timestamp>`] 

### function max_cate_where

```cpp
max_cate_where()
```

**Description**:

Compute maximum of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | condition    | catagory     |
|  -------- | -------- | -------- |
| 0    | true    | x     |
| 1    | false    | y     |
| 2    | false    | x     |
| 3    | true    | y     |
| 4    | true    | x    |


```sql

SELECT max_cate_where(value, condition, category) OVER w;
-- output "x:4,y:3"
```

**Supported Types**:

* [`list<number>`, `list<bool>`, `list<date>`]
* [`list<number>`, `list<bool>`, `list<int16>`]
* [`list<number>`, `list<bool>`, `list<int32>`]
* [`list<number>`, `list<bool>`, `list<int64>`]
* [`list<number>`, `list<bool>`, `list<string>`]
* [`list<number>`, `list<bool>`, `list<timestamp>`] 

### function max_where

```cpp
max_where()
```

**Description**:

Compute maximum of values match specified condition. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT max_where(value, value <= 2) OVER w;
-- output 2
```


**Supported Types**:

* [`list<number>`, `list<bool>`] 

### function maximum

```cpp
maximum()
```

**Description**:

Compute maximum of two arguments. 

**Since**:
0.1.0



**Supported Types**:

* [`bool`, `bool`]
* [`bool`, `number`]
* [`bool`, `string`]
* [`date`, `date`]
* [`date`, `string`]
* [`number`, `bool`]
* [`number`, `number`]
* [`number`, `string`]
* [`string`, `bool`]
* [`string`, `date`]
* [`string`, `number`]
* [`string`, `string`]
* [`string`, `timestamp`]
* [`timestamp`, `string`]
* [`timestamp`, `timestamp`] 

### function median

```cpp
median()
```

**Description**:

Compute the median of values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.6.0



Example:


| value     |
|  -------- |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT median(value) OVER w;
-- output 2.5
```


**Supported Types**:

* [`list<number>`] 

### function min

```cpp
min()
```

**Description**:

Compute minimum of values. 

**Parameters**: 

  * **value** Specify value column to aggregate on.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT min(value) OVER w;
-- output 0
```


**Supported Types**:

* [`list<date>`]
* [`list<number>`]
* [`list<string>`]
* [`list<timestamp>`] 

### function min_cate

```cpp
min_cate()
```

**Description**:

Compute minimum of values grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | catagory     |
|  -------- | -------- |
| 0    | x     |
| 1    | y     |
| 2    | x     |
| 3    | y     |
| 4    | x    |


```sql

SELECT min_cate(value, catagory) OVER w;
-- output "x:0,y:1"
```

**Supported Types**:

* [`list<number>`, `list<date>`]
* [`list<number>`, `list<int16>`]
* [`list<number>`, `list<int32>`]
* [`list<number>`, `list<int64>`]
* [`list<number>`, `list<string>`]
* [`list<number>`, `list<timestamp>`] 

### function min_cate_where

```cpp
min_cate_where()
```

**Description**:

Compute minimum of values matching specified condition grouped by category key and output string. Each group is represented as 'K:V' and separated by comma in outputs and are sorted by key in ascend order. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column. 
  * **catagory** Specify catagory column to group by.



Example:


| value    | condition    | catagory     |
|  -------- | -------- | -------- |
| 0    | true    | x     |
| 1    | false    | y     |
| 2    | false    | x     |
| 1    | true    | y     |
| 4    | true    | x     |
| 3    | true    | y    |


```sql

SELECT min_cate_where(value, condition, category) OVER w;
-- output "x:0,y:1"
```

**Supported Types**:

* [`list<number>`, `list<bool>`, `list<date>`]
* [`list<number>`, `list<bool>`, `list<int16>`]
* [`list<number>`, `list<bool>`, `list<int32>`]
* [`list<number>`, `list<bool>`, `list<int64>`]
* [`list<number>`, `list<bool>`, `list<string>`]
* [`list<number>`, `list<bool>`, `list<timestamp>`] 

### function min_where

```cpp
min_where()
```

**Description**:

Compute minimum of values match specified condition. 

**Parameters**: 

  * **value** Specify value column to aggregate on. 
  * **condition** Specify condition column.


**Since**:
0.1.0



Example:


| value     |
|  -------- |
| 0     |
| 1     |
| 2     |
| 3     |
| 4    |


```sql

SELECT min_where(value, value > 2) OVER w;
-- output 3
```


**Supported Types**:

* [`list<number>`, `list<bool>`] 

### function minimum

```cpp
minimum()
```

**Description**:

Compute minimum of two arguments. 

**Since**:
0.1.0



**Supported Types**:

* [`bool`, `bool`]
* [`bool`, `number`]
* [`bool`, `string`]
* [`date`, `date`]
* [`date`, `string`]
* [`number`, `bool`]
* [`number`, `number`]
* [`number`, `string`]
* [`string`, `bool`]
* [`string`, `date`]
* [`string`, `number`]
* [`string`, `string`]
* [`string`, `timestamp`]
* [`timestamp`, `string`]
* [`timestamp`, `timestamp`] 

### function minute

```cpp
minute()
```

**Description**:

Return the minute for a timestamp. 

**Since**:
0.1.0


Example:

```sql

select minute(timestamp(1590115420000));
-- output 43
```


**Supported Types**:

* [`int64`]
* [`timestamp`] 

### function month

```cpp
month()
```

**Description**:

Return the month part of a timestamp or date. 

**Since**:
0.1.0


Example:

```sql

select month(timestamp(1590115420000));
-- output 5
```


**Supported Types**:

* [`date`]
* [`int64`]
* [`timestamp`] 




